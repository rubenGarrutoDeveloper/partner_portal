<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<link rel="stylesheet" th:href="@{/css/projects-list.css}" />
<head th:replace="fragments :: html_head">
</head>

<body>
	<div th:replace="fragments :: menu"></div>

	<div class="container">
		<div class="project-title">
			<h3>PROJECTS</h3>
		</div>
		<hr>

<!--		<p>-->
<!--			The number of projects is: <span th:text="${projects.size()}"></span>-->
<!--		</p>-->

		<a th:href="@{/projects/addNewProject}"
			class="btn btn-primary btn-sm mr-5 mb-3"
			sec:authorize="!isAnonymous()"> Add Projects </a>

		<div class="cards-container">
			<article class="card-project" th:each="project : ${projects}">
				<div class="card-content">
					<div class="card-title">
						<h4><td th:text="${project.title}" /></h4>
					</div>
					<div class="card-middle-container">
						<div class="card-percent">75%</div>
						<div class="card-icon">
							<svg class="card-icon-svg" width="100%" style="" viewBox="0 0 89 100" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" clip-rule="evenodd" d="M27.0971 38.9486L42.0882 30.599V14.9007C40.3463 14.5918 38.7689 13.6814 37.6325 12.3291L13.6157 26.1882C13.9014 26.9857 14.0564 27.8402 14.0564 28.7354C14.0564 29.484 13.9503 30.2002 13.7463 30.8838L27.0971 38.9486ZM36.3595 10.1562C36.0408 9.31067 35.8777 8.41471 35.878 7.51139C35.878 5.4362 36.7185 3.55632 38.0814 2.19727C39.4442 0.838216 41.3293 0 43.4103 0C45.4912 0 47.3763 0.838216 48.7392 2.19727C49.4393 2.89465 49.9944 3.72313 50.3725 4.63509C50.7507 5.54706 50.9444 6.52455 50.9425 7.51139C50.9425 8.42285 50.7793 9.29362 50.4855 10.0993L74.6166 24.0153C74.7879 23.8118 74.9593 23.6084 75.147 23.4212C75.8463 22.723 76.6771 22.1694 77.5916 21.7924C78.5061 21.4153 79.4863 21.2221 80.4759 21.224C82.5569 21.224 84.442 22.0622 85.8048 23.4212C86.505 24.1186 87.0601 24.9471 87.4382 25.8591C87.8163 26.771 88.01 27.7485 88.0082 28.7354C88.0082 30.8105 87.1676 32.6823 85.8048 34.0413C84.6335 35.2107 83.1069 35.9605 81.4634 36.1735V63.7695C83.1526 63.9893 84.6623 64.7624 85.8048 65.9017C87.1676 67.2607 88.0082 69.1406 88.0082 71.2077C88.009 72.1943 87.8148 73.1715 87.4366 74.0832C87.0584 74.9949 86.5036 75.8233 85.804 76.521C85.1043 77.2186 84.2737 77.7719 83.3594 78.149C82.4452 78.5262 81.4653 78.7199 80.4759 78.7191C79.3588 78.7208 78.2554 78.4741 77.2461 77.9968C76.2367 77.5196 75.3467 76.8238 74.6411 75.9603L50.4774 89.8926C50.7712 90.6982 50.9344 91.569 50.9344 92.4805C50.9344 94.5557 50.0938 96.4355 48.731 97.7946C48.0317 98.4928 47.2009 99.0464 46.2864 99.4235C45.3719 99.8005 44.3917 99.9937 43.4021 99.9919C41.3211 99.9919 39.436 99.1536 38.0732 97.7946C36.7104 96.4355 35.8698 94.5557 35.8698 92.4805C35.8698 91.5527 36.0412 90.6575 36.3513 89.8356L12.3427 75.9928C11.6364 76.8498 10.748 77.5396 9.74174 78.0125C8.7355 78.4854 7.63651 78.7295 6.52414 78.7272C4.44318 78.7272 2.55807 77.889 1.19524 76.5299C-0.159427 75.1709 -0.999974 73.291 -0.999974 71.2158C-0.999974 69.1406 -0.159427 67.2689 1.2034 65.9098C2.36136 64.7539 3.8653 64.0054 5.48774 63.7777V36.1654C3.86419 35.9412 2.35917 35.1922 1.2034 34.0332C0.502714 33.3379 -0.0527921 32.5109 -0.430991 31.6002C-0.809191 30.6894 -1.00258 29.713 -0.999974 28.7272C-0.999974 26.652 -0.159427 24.7721 1.2034 23.4131C1.90273 22.7149 2.7335 22.1613 3.64801 21.7842C4.56251 21.4071 5.54271 21.214 6.5323 21.2158C7.65141 21.2139 8.75683 21.4613 9.76775 21.94C10.7787 22.4187 11.6696 23.1166 12.3753 23.9827L36.3595 10.1562ZM49.2206 12.2803C48.0769 13.671 46.469 14.6041 44.6915 14.9089V30.599L59.6499 39.2415L73.4006 31.3151C73.0987 30.5094 72.9436 29.6305 72.9436 28.7272C72.9436 27.8483 73.0987 26.9938 73.3762 26.2126L49.2206 12.2803ZM79.1621 36.1247C77.64 35.8607 76.2373 35.1329 75.147 34.0413C74.992 33.8867 74.8451 33.7321 74.7063 33.5612L60.9801 41.4714V58.3822L74.7635 66.3167C74.8859 66.1784 75.0083 66.04 75.1389 65.9098C76.2302 64.8198 77.6324 64.0922 79.1539 63.8265V36.1247H79.1621ZM73.3925 73.7793C73.0987 72.9818 72.9436 72.1191 72.9436 71.224C72.9436 70.2799 73.115 69.3766 73.4414 68.5384L60.1069 60.8643L44.6915 69.7998V85.0911C46.469 85.3959 48.0769 86.329 49.2206 87.7197L73.3925 73.7793ZM37.6325 87.6628C38.7689 86.3105 40.3463 85.4001 42.0882 85.0911V69.7266L26.6157 60.7747L13.4852 68.335C13.8524 69.222 14.0646 70.1986 14.0646 71.224C14.0646 72.1354 13.9014 73.0062 13.6076 73.8118L37.6325 87.6628ZM7.78088 63.8102C9.35589 64.0706 10.7677 64.8275 11.853 65.9098C11.9346 65.9912 12.0081 66.0726 12.0815 66.154L25.4568 58.4554V40.9831L12.5793 33.2031C12.359 33.5042 12.1142 33.7809 11.853 34.0413C10.7466 35.145 9.32362 35.8787 7.78088 36.1409V63.8102ZM6.54046 33.6426C6.5731 33.6426 6.60575 33.6344 6.63839 33.6344H6.70368C7.95074 33.5954 9.13582 33.0831 10.0169 32.2021C10.4753 31.7463 10.8388 31.2047 11.0867 30.6084C11.3346 30.012 11.4619 29.3727 11.4613 28.7272C11.4613 27.3682 10.9064 26.1393 10.0169 25.2523C9.12739 24.3652 7.89513 23.8118 6.5323 23.8118C5.16947 23.8118 3.93722 24.3652 3.04771 25.2523C2.58934 25.7081 2.22578 26.2497 1.97791 26.8461C1.73003 27.4424 1.60271 28.0817 1.60327 28.7272C1.60327 30.0863 2.1582 31.3151 3.04771 32.2021C3.50596 32.66 4.05045 33.0229 4.64987 33.2701C5.24929 33.5173 5.89181 33.6439 6.54046 33.6426ZM46.8867 89.0218C46.4296 88.5647 45.8865 88.2022 45.2885 87.955C44.6905 87.7078 44.0494 87.5808 43.4021 87.5814C42.0393 87.5814 40.807 88.1348 39.9175 89.0218C39.028 89.9089 38.4731 91.1377 38.4731 92.4967C38.4731 93.8558 39.028 95.0846 39.9175 95.9717C40.807 96.8587 42.0393 97.4121 43.4021 97.4121C44.7649 97.4121 45.9972 96.8587 46.8867 95.9717C47.7762 95.0846 48.3311 93.8558 48.3311 92.4967C48.3311 91.1377 47.7844 89.9089 46.8867 89.0218ZM46.8867 4.03646C46.4296 3.57937 45.8865 3.21681 45.2885 2.96962C44.6905 2.72243 44.0494 2.59547 43.4021 2.59603C42.0393 2.59603 40.807 3.14941 39.9175 4.03646C39.028 4.9235 38.4731 6.15234 38.4731 7.51139C38.4731 8.87044 39.028 10.0993 39.9175 10.9863C40.3746 11.4434 40.9177 11.806 41.5157 12.0532C42.1137 12.3004 42.7548 12.4273 43.4021 12.4268C44.7649 12.4268 45.9972 11.8734 46.8867 10.9863C47.3451 10.5305 47.7086 9.98887 47.9565 9.39254C48.2044 8.79621 48.3317 8.15693 48.3311 7.51139C48.3311 6.15234 47.7844 4.9235 46.8867 4.03646ZM83.9523 67.749C83.4953 67.2919 82.9521 66.9294 82.3541 66.6822C81.7561 66.435 81.1151 66.308 80.4678 66.3086C79.1049 66.3086 77.8727 66.862 76.9832 67.749C76.5248 68.2048 76.1612 68.7465 75.9134 69.3428C75.6655 69.9391 75.5382 70.5784 75.5387 71.224C75.5387 72.583 76.0936 73.8118 76.9832 74.6989C77.4403 75.156 77.9834 75.5185 78.5814 75.7657C79.1794 76.0129 79.8204 76.1399 80.4678 76.1393C81.8306 76.1393 83.0628 75.5859 83.9523 74.6989C84.4107 74.2431 84.7743 73.7014 85.0222 73.1051C85.27 72.5088 85.3973 71.8695 85.3968 71.224C85.3968 69.8649 84.85 68.6361 83.9523 67.749ZM10.0169 67.749C9.12739 66.862 7.89513 66.3086 6.5323 66.3086C5.16947 66.3086 3.93722 66.862 3.04771 67.749C2.58934 68.2048 2.22578 68.7465 1.97791 69.3428C1.73003 69.9391 1.60271 70.5784 1.60327 71.224C1.60327 72.583 2.1582 73.8118 3.04771 74.6989C3.93722 75.5859 5.16947 76.1393 6.5323 76.1393C7.89513 76.1393 9.12739 75.5859 10.0169 74.6989C10.4753 74.2431 10.8388 73.7014 11.0867 73.1051C11.3346 72.5088 11.4619 71.8695 11.4613 71.224C11.4587 69.9209 10.9395 68.6718 10.0169 67.749ZM76.0773 30.9489C76.1426 31.014 76.1916 31.0954 76.2405 31.1768C76.2895 31.2581 76.3221 31.3395 76.3548 31.429C76.5425 31.7057 76.7547 31.9661 76.9832 32.2021C77.4403 32.6592 77.9834 33.0218 78.5814 33.269C79.1794 33.5162 79.8204 33.6431 80.4678 33.6426C81.8306 33.6426 83.0628 33.0892 83.9523 32.2021C84.4107 31.7463 84.7743 31.2047 85.0222 30.6084C85.27 30.012 85.3973 29.3727 85.3968 28.7272C85.3968 27.3682 84.8419 26.1393 83.9523 25.2523C83.4953 24.7952 82.9521 24.4326 82.3541 24.1854C81.7561 23.9383 81.1151 23.8113 80.4678 23.8118C79.1049 23.8118 77.8727 24.3652 76.9832 25.2523C76.5248 25.7081 76.1612 26.2497 75.9134 26.8461C75.6655 27.4424 75.5382 28.0817 75.5387 28.7272C75.5469 29.5329 75.7427 30.2816 76.0773 30.9489ZM27.8969 58.1787C28.0823 58.3776 28.2044 58.6268 28.2478 58.8949L42.227 67.0898V50.9115L27.8969 42.4072V58.1787ZM58.5483 42.627L44.667 50.9196V67.1061L58.5483 58.9274V42.627ZM43.3858 32.5439L29.8391 40.625L43.4592 48.8037L56.6876 40.7959L43.3858 32.5439Z" fill="#3685EA"></path>
							</svg>
						</div>
					</div>
					<div class="card-fund-raised">
<!--						<td th:text="${project.getRelProjectPhaseBean().totalFund}" />-->
							10.000,00 â‚¬
					</div>
					<div class="card-view-detail-container">
						<button class="card-view-detail">View</button>
					</div>
				</div>

				<footer>LIVE</footer>
			</article>
		</div>

		<!-- TABLE PROJECTS -->
		<table class="table table-bordered table-striped">
			<thead class="thead-dark">
				<tr>
					<th>ID</th>
					<th>Title
						<form th:action="@{/projects/searchByProjectName}"
							class="form-inline">
							<input id="search-input" class="form-control ml-5 mr-sm-2 mb-3"
								type="search" name="projectName"
								placeholder="Search by name project" />
						</form>
					</th>
					<th>Description</th>
					<th>State</th>
					<th>Created by</th>
					<th>Date</th>
					<th>Details</th>
					<div sec:authorize="hasAnyRole('ROLE_PARTNER', 'ROLE_ADMIN')">
						<th>Action</th>
					</div>
				</tr>
			</thead>

			<tbody>
				<tr th:each="project : ${projects}">
					<td th:text="${project.codeProject}" />
					<td th:text="${project.title}" />
					<td th:text="${project.descProject}" />
					<td th:text="${@projectController.getDescState(project.idStatus)}" />
					<td th:text="${project.nameCreatedBy}" />
					<td th:text="${project.dateLastState}" />
					<td>
						<form th:action="@{/projects/project-details}" method="get">
							<input type="hidden" name="idProject"
								th:value="${project.idProject}" />
							<button type="submit" class="btn btn-sm btn-info">
								<i class="bi bi-search"></i>
							</button>
						</form>
					</td>
					<div sec:authorize="hasAnyRole('ROLE_PARTNER', 'ROLE_ADMIN')">

						<td>
							<div sec:authorize="hasAnyRole('ROLE_PARTNER', 'ROLE_ADMIN')">
								<a
									th:href="@{/projects/showFormForUpdate(projectId=${project.idProject})}"
									class="btn btn-info btn-sm mr-5 mb-3"> Update </a>
							</div>

							<div sec:authorize="hasRole('ROLE_ADMIN')">

								<!-- Add "delete" button/link -->
								<a th:href="@{/projects/delete/project(projectId=${project.idProject})}"
									class="btn btn-danger btn-sm mr-5 mb-3"
									onclick="if (!(confirm('Are you sure you want to delete this?'))) return false">
									Delete </a>

							</div>
						</td>

					</div>


				</tr>
			</tbody>
		</table>
	</div>
	<div th:replace="fragments :: footer"></div>
</body>
</html>



